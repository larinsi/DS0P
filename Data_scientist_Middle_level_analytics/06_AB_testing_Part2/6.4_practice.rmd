---
title: "Lesson 4 practice"
output:
  word_document: default
  html_notebook: default
---
Файл conversion.csv содержит данные для AB-тестирования, проводимого с целью понять, приводит ли переход к новому типу меню к увеличению конверсии сайта.

Столбцы содержат значения 0 и 1, где 1 соответствует пользователю, который кликнул на меню и продолжил знакомство с сайтом, 0 - пользователю, который не стал продолжать знакомство с сайтом. Столбец OLD соответствует сайту со старым меню, а столбец NEW - сайту с новым меню.

### Часть 1
1. Используя R, реализуйте бутстрэп с числом итераций N = 1500 для проверки гипотезы об отсутствии различий в значениях конверсии. Посчитайте p-value.
2. Для визуализации полученного p-value постройте, используя ggplot2, гистограмму распределения разностей долей, отметив красной вертикальной линией значение разности, равное 0.
3. Проверьте, согласуются ли полученные результаты с интуицией. Другими словами, правда ли разница p_new - p_old кажется такой маленькой, как показывает значение p-value и график?
4. Используя уточнения из предыдущего пункта, пересчитайте p-value и постройте новый график.
5. Сделайте вывод о том, есть ли различия в значениях конверсии старой и новой версии сайта.
```{r}
dat <- read.csv("conversion.csv")
old <- dat$OLD
new <- dat$NEW
p_old <- mean(old)
p_new <- mean(new)
p_new - p_old

N <- 1500

set.seed(12)

differences <- rep(NA, N)
for (i in 1:N){
  s1 <- sample(old, replace = TRUE)
  s2 <- sample(new, replace = TRUE)
  p1 <- sum(s1)/length(s1)
  p2 <- sum(s2)/length(s2)
  p_diff <- p2 - p1
  differences[i] <- p_diff
}


library(tidyverse)
diff_df <- data.frame(dif = differences)
ggplot(data = diff_df, aes(x = dif)) + geom_histogram(fill = "lightblue", color = "navy") +
  geom_vline(xintercept = 0.6325, color = "red", lty = 2)
```
```{r}

```


Все ведет [сюда](https://vk.com/a__gavrilov)